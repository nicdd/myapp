<!--
Pagination Element for Vaadin-Grid Tables
-->

<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-dialog/vaadin-dialog.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../general/my-versicherungrechner.html">
<link rel="import" href="../utils/grt-gartler.html">


<link rel="import" href="../clients/basicclient.html">
<dom-module id="grt-dialog">
    <template>
        <style include="shared-styles">
            :host {
                display: inline-block;

                padding: 3px;
            }
        </style>
        <basic-client id="bclient"></basic-client>
        <vaadin-dialog id="pdialog">

            <template>
                <div class="layout vertical justified">
                    <h3>Neuen Versicherten hinzuf√ºgen</h3>
                    <grt-gartler></grt-gartler>
                    <my-versicherungrechner id="versicherungrechner" vconfig="[[vconfig]]">
                    </my-versicherungrechner>
                </div>
                <div class="buttons">
                    <paper-button on-click="_closeDialog">[[getCancelName(cancelName)]]</paper-button>
                    <paper-button on-click="_doAction">[[getConfirmationName(confirmationName)]]</paper-button>
                </div>
            </template>

        </vaadin-dialog>


    </template>

    <script>
        class GrtDialog extends Polymer.Element {
            static get is() { return 'grt-dialog'; }

            static get properties() {
                return {

                    vconfig: {
                        type: Object,
                        notify: true
                    },

                    defaultConfirmName: {
                        type: String,
                        value: 'Ok'
                    },

                    defaultCancelName: {
                        type: String,
                        value: 'Cancel'
                    },

                    dialogType: String,

                    cancelName: {
                        type: String,
                        value: null,
                        notify: true
                    },

                    confirmationName: String

                }


            }

            showDialog() {
                this.$.bclient.getVersicherungconfig().then((vconf) => {
                    this.set('vconfig', vconf)

                }).finally(() => {
                    this.$.pdialog.opened = true;
                })
            }

            _closeDialog() {
                this.$.pdialog.opened = false;
            }

            getCancelName(cancelName) {
                if (!this.cancelName) {
                    return this.defaultCancelName;
                } else return this.cancelName;
            }

            getConfirmationName(confirmationName) {
                if (!this.confirmationName) {
                    return this.defaultConfirmName;
                } else return this.confirmationName;
            }

        }

        window.customElements.define(GrtDialog.is, GrtDialog);
    </script>
</dom-module>