<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-dialog/vaadin-dialog.html">
<link rel="import" href="../../bower_components/paper-progress-button/paper-progress-button.html">

<dom-module id="grt-sand-clock" theme-for="vaadin-dialog-overlay">
    <template>
        <style include="shared-styles">
            :host([theme~="grt-sand-clock"]) [part="content"] {
                position: absolute;
                overflow-x: hidden;
                overflow-y: hidden;
                padding: 0;
            }

            #bottom {
                position: fixed;
                top: 50%;
                left: 50%;
                border-left: 50px solid transparent;
                border-right: 50px solid transparent;
                border-bottom: 100px solid #194872;
                animation: flipbottom 5s infinite ease-in-out;
                transform-origin: 50px 0px;
                border-radius: 0rem;
            }

            #bottom_two {
                position: fixed;
                top: 50%;
                left: 50%;
                border-left: 50px solid transparent;
                border-right: 50px solid transparent;
                border-bottom: 100px solid #a0c5dd;
                animation: flipbottom 5s infinite ease-in-out;
                transform-origin: 50px 0px;
                animation-delay: 0.8s;
                border-radius: 0.2rem;
            }

            @keyframes flipbottom {
                0% {
                    transform: rotate(0deg);
                }

                10% {
                    transform: rotate(190deg) translate(-2px, 2px);
                }

                20% {
                    transform: rotate(172deg);
                }

                25% {
                    transform: rotate(184deg);
                }

                30% {
                    transform: rotate(180deg);
                }

                50% {
                    transform: rotate(180deg);
                }

                60% {
                    transform: rotate(370deg) translate(-1px, 1px);
                }

                70% {
                    transform: rotate(352deg);
                }

                75% {
                    transform: rotate(364deg);
                }

                80% {
                    transform: rotate(360deg);
                }

                100% {
                    transform: rotate(360deg);
                }
            }
        </style>

        <vaadin-dialog id="vdialog" theme="grt-sand-clock" no-close-on-outside-click no-close-on-esc>
            <template>
                <div id="bottom"></div>
                <div id="bottom_two"></div>
            </template>
        </vaadin-dialog>
    </template>

    <script>
        class GrtSandClock extends Polymer.Element {
            static get is() { return 'grt-sand-clock'; }

            static get properties() {
                return {

                    title: {
                        type: String,
                        value: null
                    },

                    message: {
                        type: String,
                        value: null
                    },

                    origData: {
                        type: Object,
                        value: null
                    }
                }

            }

            showDialog(textsObjekt) {
                if (textsObjekt) {
                    this.set('title', textsObjekt.title);
                    this.set('message', textsObjekt.message);
                    this.set('origData', textsObjekt.origData);
                }
                this.$.vdialog.opened = true;
            }

            _closeDialog() {
                this.$.vdialog.opened = false;
            }

        }

        window.customElements.define(GrtSandClock.is, GrtSandClock);
    </script>
</dom-module>