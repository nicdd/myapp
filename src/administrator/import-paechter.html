
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="import-allgemein.html">
<dom-module id="import-paechter">
  <script>
    class ImportPaechter extends customElements.get('import-allgemein') {
      static get is() { return 'import-paechter'; }

      ready(){
        super.ready();
        this.set('domainname', 'paechter');
        this.set('disableDomainNameInput', true);
        this.$.firstclient.getAsJSON('paechter').then((paechter) => {
          if (paechter && paechter.columns && paechter.columns.length && paechter.data && paechter.data.length) {
            this.set('completed', true)
          }
        }).catch(() => {
          this.set('completed', false)
        })
      }

      _checkForMustColumns(conf) {
          let gartenNummer = conf.find((elem) => elem.colname === "GARTENNUMMER");
          if (!gartenNummer || !gartenNummer.colname || !gartenNummer.coltype || !gartenNummer.alias || !gartenNummer.rolen || !(Array.isArray(gartenNummer.rolen))) {
            gartenNummer = {
              "colname": "GARTENNUMMER",
              "coltype": "string",
              "alias": "Aufnahme",
              "rolen": [
                "paechter",
                "versicherung",
                "foerdermitglieder"
              ]
            }
            conf.unshift(gartenNummer);
          }
        return conf;
      }

    }

    window.customElements.define(ImportPaechter.is, ImportPaechter);
  </script>
</dom-module>